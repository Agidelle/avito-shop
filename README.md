# 'README'

Команды:\
`go run main.go serve` - запуск сервиса\

При запуске сервиса происходит автоматическая миграция рабочей БД\
Доп утилиты для миграции:\
`go run main.go migration` - запуск миграций основной БД и тестовой

Файл `init.sql` также содержит скрипт миграции основной БД и тестовой\

Структура проекта:\
`/cmd` - запуск сервиса и миграции\
`/config` - содержит конфигурации сервиса\
`/internal/config` - загрузка конфигураций\
`/internal/http-server` - содержит: auth, handlers и middleware для обработки запросов\
`/internal/service/shop` - бизнес логика сервиса\
`/internal/service/shop/storage` - реализация работы с БД

Тесты:
`/internal/http-server/handlers_test.go`\
`/internal/service/shop/service_test.go`\
`/internal/service/shop/storage/mysql/mysql_test.go`

# `+Info`

В проекте использовались библиотеки: `cobra`, `viper` для запуска и конфигурации сервиса\
`testify` - тесты, `x/crypto` - хэширования паролей, `slog` - логирование\
`chi` - выбран легкий роутер полностью совместимый с базовыми библиотеками Go.

`MYSQL` - был плохим решением для выбора БД, в связи с проблемами с миграциями и доступом к дополнительной БД для тестов.\
Также возникали сложности со связью сервиса с БД в контейнере docker, обусловленные особенностью работы этой БД.\
При миграции БД, бывают сложности создания дополнительной схемы для тестов и выдачи прав доступа и переключением пользователей.\
Возможно нужно было реализовать не тестовую БД, а дополнительные тестовые БД внутри основной БД.

В узких местах сервиса, где выполняются транзакции связанные с монетами и запросами в БД для проверок,\
использовались горутины, что позволило значительно уменьшить задержку.

